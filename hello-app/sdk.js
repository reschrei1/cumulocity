/*! c8ySmartUI - UI SDK - 5.0.2
17-03-2014 */
!function(){var a="undefined"!=typeof window?window:exports,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=function(){try{document.createElement("$")}catch(a){return a}}();a.btoa||(a.btoa=function(a){for(var d,e,f=0,g=b,h="";a.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&d>>8-8*(f%1))){if(e=a.charCodeAt(f+=.75),e>255)throw c;d=d<<8|e}return h}),a.atob||(a.atob=function(a){if(a=a.replace(/=+$/,""),1==a.length%4)throw c;for(var d,e,f=0,g=0,h="";e=a.charAt(g++);~e&&(d=f%4?64*d+e:e,f++%4)?h+=String.fromCharCode(255&d>>(6&-2*f)):0)e=b.indexOf(e);return h})}(),function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function d(){}function e(a){g(this,a)}function f(a){var b=a.years||a.year||a.y||0,c=a.months||a.month||a.M||0,d=a.weeks||a.week||a.w||0,e=a.days||a.day||a.d||0,f=a.hours||a.hour||a.h||0,g=a.minutes||a.minute||a.m||0,h=a.seconds||a.second||a.s||0,i=a.milliseconds||a.millisecond||a.ms||0;this._input=a,this._milliseconds=i+1e3*h+6e4*g+36e5*f,this._days=e+7*d,this._months=c+12*b,this._data={},this._bubble()}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function j(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&H.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function m(a){return a?eb[a]||a.toLowerCase().replace(/(.)s$/,"$1"):a}function n(a,b){return b.abbr=a,L[a]||(L[a]=new d),L[a].set(b),L[a]}function o(a){if(!a)return H.fn._lang;if(!L[a]&&M)try{require("./lang/"+a)}catch(b){return H.fn._lang}return L[a]}function p(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function q(a){var b,c,d=a.match(P);for(b=0,c=d.length;c>b;b++)d[b]=ib[d[b]]?ib[d[b]]:p(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function r(a,b){function c(b){return a.lang().longDateFormat(b)||b}for(var d=5;d--&&Q.test(b);)b=b.replace(Q,c);return fb[b]||(fb[b]=q(b)),fb[b](a)}function s(a,b){switch(a){case"DDDD":return T;case"YYYY":return U;case"YYYYY":return V;case"S":case"SS":case"SSS":case"DDD":return S;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return W;case"a":case"A":return o(b._l)._meridiemParse;case"X":return Z;case"Z":case"ZZ":return X;case"T":return Y;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return R;default:return new RegExp(a.replace("\\",""))}}function t(a){var b=(X.exec(a)||[])[0],c=(b+"").match(bb)||["-",0,0],d=+(60*c[1])+~~c[2];return"+"===c[0]?-d:d}function u(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":e[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":d=o(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm=o(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=t(b)}null==b&&(c._isValid=!1)}function v(a){var b,c,d=[];if(!a._d){for(b=0;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];d[3]+=~~((a._tzm||0)/60),d[4]+=~~((a._tzm||0)%60),c=new Date(0),a._useUTC?(c.setUTCFullYear(d[0],d[1],d[2]),c.setUTCHours(d[3],d[4],d[5],d[6])):(c.setFullYear(d[0],d[1],d[2]),c.setHours(d[3],d[4],d[5],d[6])),a._d=c}}function w(a){var b,c,d=a._f.match(P),e=a._i;for(a._a=[],b=0;b<d.length;b++)c=(s(d[b],a).exec(e)||[])[0],c&&(e=e.slice(e.indexOf(c)+c.length)),ib[d[b]]&&u(d[b],c,a);e&&(a._il=e),a._isPm&&a._a[3]<12&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),v(a)}function x(a){var b,c,d,f,h,i=99;for(f=0;f<a._f.length;f++)b=g({},a),b._f=a._f[f],w(b),c=new e(b),h=l(b._a,c.toArray()),c._il&&(h+=c._il.length),i>h&&(i=h,d=c);g(a,d)}function y(a){var b,c=a._i,d=$.exec(c);if(d){for(a._f="YYYY-MM-DD"+(d[2]||" "),b=0;4>b;b++)if(ab[b][1].exec(c)){a._f+=ab[b][0];break}X.exec(c)&&(a._f+=" Z"),w(a)}else a._d=new Date(c)}function z(b){var c=b._i,d=N.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?y(b):k(c)?(b._a=c.slice(0),v(b)):b._d=c instanceof Date?new Date(+c):new Date(c)}function A(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function B(a,b,c){var d=K(Math.abs(a)/1e3),e=K(d/60),f=K(e/60),g=K(f/24),h=K(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",K(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,A.apply({},i)}function C(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=H(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function D(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=o().preparse(b)),H.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?x(a):w(a):z(a),new e(a))}function E(a,b){H.fn[a]=H.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),H.updateOffset(this),this):this._d["get"+c+b]()}}function F(a){H.duration.fn[a]=function(){return this._data[a]}}function G(a,b){H.duration.fn["as"+a]=function(){return+this/b}}for(var H,I,J="2.1.0",K=Math.round,L={},M="undefined"!=typeof module&&module.exports,N=/^\/?Date\((\-?\d+)/i,O=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,P=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,Q=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,R=/\d\d?/,S=/\d{1,3}/,T=/\d{3}/,U=/\d{1,4}/,V=/[+\-]?\d{1,6}/,W=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,X=/Z|[\+\-]\d\d:?\d\d/i,Y=/T/i,Z=/[\+\-]?\d+(\.\d{1,3})?/,$=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,_="YYYY-MM-DDTHH:mm:ssZ",ab=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bb=/([\+\-]|\d\d)/gi,cb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),db={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},eb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},fb={},gb="DDD w W M D d".split(" "),hb="M D H h m s w W".split(" "),ib={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},gg:function(){return i(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return i(this.weekYear(),5)},GG:function(){return i(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return i(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return i(~~(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(a/60),2)+":"+i(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};gb.length;)I=gb.pop(),ib[I+"o"]=c(ib[I],I);for(;hb.length;)I=hb.pop(),ib[I+I]=b(ib[I],2);for(ib.DDDD=b(ib.DDD,3),d.prototype={set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=H([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=H([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase()[0]},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return C(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}},H=function(a,b,c){return D({_i:a,_f:b,_l:c,_isUTC:!1})},H.utc=function(a,b,c){return D({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b})},H.unix=function(a){return H(1e3*a)},H.duration=function(a,b){var c,d,e=H.isDuration(a),g="number"==typeof a,h=e?a._input:g?{}:a,i=O.exec(a);return g?b?h[b]=a:h.milliseconds=a:i&&(c="-"===i[1]?-1:1,h={y:0,d:~~i[2]*c,h:~~i[3]*c,m:~~i[4]*c,s:~~i[5]*c,ms:~~i[6]*c}),d=new f(h),e&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},H.version=J,H.defaultFormat=_,H.updateOffset=function(){},H.lang=function(a,b){return a?(b?n(a,b):L[a]||o(a),H.duration.fn._lang=H.fn._lang=o(a),void 0):H.fn._lang._abbr},H.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),o(a)},H.isMoment=function(a){return a instanceof e},H.isDuration=function(a){return a instanceof f},H.fn=e.prototype={clone:function(){return H(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return r(H(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!l(this._a,(this._isUTC?H.utc(this._a):H(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=r(this,a||H.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?H.duration(+b,a):H.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?H.duration(+b,a):H.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?H(a).zone(this._offset||0):H(a).local(),g=6e4*(this.zone()-f.zone());return b=m(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-H(this).startOf("month")-(f-H(f).startOf("month")))/d,e-=6e4*(this.zone()-H(this).startOf("month").zone()-(f.zone()-H(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:h(e)},from:function(a,b){return H.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(H(),a)},calendar:function(){var a=this.diff(H().startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?"string"==typeof a&&(a=this.lang().weekdaysParse(a),"number"!=typeof a)?this:this.add({d:a-b}):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),H.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=m(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),this},endOf:function(a){return this.startOf(a).add(a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+H(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+H(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+H(a).startOf(b)},min:function(a){return a=H.apply(null,arguments),this>a?this:a},max:function(a){return a=H.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=t(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&j(this,H.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return H.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=K((H(this).startOf("day")-H(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},weekYear:function(a){var b=C(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=C(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=C(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},lang:function(b){return b===a?this._lang:(this._lang=o(b),this)}},I=0;I<cb.length;I++)E(cb[I].toLowerCase().replace(/s$/,""),cb[I]);E("year","FullYear"),H.fn.days=H.fn.day,H.fn.months=H.fn.month,H.fn.weeks=H.fn.week,H.fn.isoWeeks=H.fn.isoWeek,H.fn.toJSON=H.fn.toISOString,H.duration.fn=f.prototype={_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,i=this._data;i.milliseconds=e%1e3,a=h(e/1e3),i.seconds=a%60,b=h(a/60),i.minutes=b%60,c=h(b/60),i.hours=c%24,f+=h(c/24),i.days=f%30,g+=h(f/30),i.months=g%12,d=h(g/12),i.years=d},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*~~(this._months/12)},humanize:function(a){var b=+this,c=B(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=H.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=H.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=m(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=m(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:H.fn.lang};for(I in db)db.hasOwnProperty(I)&&(G(I,db[I]),F(I.toLowerCase()));G("Weeks",6048e5),H.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},H.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),M&&(module.exports=H),"undefined"==typeof ender&&(this.moment=H),"function"==typeof define&&define.amd&&define("moment",[],function(){return H})}.call(this),this.org=this.org||{},org.cometd={},org.cometd.JSON={},org.cometd.JSON.toJSON=org.cometd.JSON.fromJSON=function(){throw"Abstract"},org.cometd.Utils={},org.cometd.Utils.isString=function(a){return void 0===a||null===a?!1:"string"==typeof a||a instanceof String},org.cometd.Utils.isArray=function(a){return void 0===a||null===a?!1:a instanceof Array},org.cometd.Utils.inArray=function(a,b){for(var c=0;c<b.length;++c)if(a===b[c])return c;return-1},org.cometd.Utils.setTimeout=function(a,b,c){return window.setTimeout(function(){try{b()}catch(c){a._debug("Exception invoking timed function",b,c)}},c)},org.cometd.Utils.clearTimeout=function(a){window.clearTimeout(a)},org.cometd.TransportRegistry=function(){var a=[],b={};this.getTransportTypes=function(){return a.slice(0)},this.findTransportTypes=function(c,d,e){for(var f=[],g=0;g<a.length;++g){var h=a[g];b[h].accept(c,d,e)===!0&&f.push(h)}return f},this.negotiateTransport=function(c,d,e,f){for(var g=0;g<a.length;++g)for(var h=a[g],i=0;i<c.length;++i)if(h===c[i]){var j=b[h];if(j.accept(d,e,f)===!0)return j}return null},this.add=function(c,d,e){for(var f=!1,g=0;g<a.length;++g)if(a[g]===c){f=!0;break}return f||("number"!=typeof e?a.push(c):a.splice(e,0,c),b[c]=d),!f},this.find=function(c){for(var d=0;d<a.length;++d)if(a[d]===c)return b[c];return null},this.remove=function(c){for(var d=0;d<a.length;++d)if(a[d]===c){a.splice(d,1);var e=b[c];return delete b[c],e}return null},this.clear=function(){a=[],b={}},this.reset=function(){for(var c=0;c<a.length;++c)b[a[c]].reset()}},org.cometd.Transport=function(){var a,b;this.registered=function(c,d){a=c,b=d},this.unregistered=function(){a=null,b=null},this._debug=function(){b._debug.apply(b,arguments)},this._mixin=function(){return b._mixin.apply(b,arguments)},this.getConfiguration=function(){return b.getConfiguration()},this.getAdvice=function(){return b.getAdvice()},this.setTimeout=function(a,c){return org.cometd.Utils.setTimeout(b,a,c)},this.clearTimeout=function(a){org.cometd.Utils.clearTimeout(a)},this.convertToMessages=function(a){if(org.cometd.Utils.isString(a))try{return org.cometd.JSON.fromJSON(a)}catch(b){throw this._debug("Could not convert to JSON the following string",'"'+a+'"'),b}if(org.cometd.Utils.isArray(a))return a;if(void 0===a||null===a)return[];if(a instanceof Object)return[a];throw"Conversion Error "+a+", typeof "+typeof a},this.accept=function(){throw"Abstract"},this.getType=function(){return a},this.send=function(){throw"Abstract"},this.reset=function(){this._debug("Transport",a,"reset")},this.abort=function(){this._debug("Transport",a,"aborted")},this.toString=function(){return this.getType()}},org.cometd.Transport.derive=function(a){function b(){}return b.prototype=a,new b},org.cometd.RequestTransport=function(){function a(a){for(;l.length>0;){var b=l[0],c=b[0],d=b[1];if(c.url!==a.url||c.sync!==a.sync)break;l.shift(),a.messages=a.messages.concat(c.messages),this._debug("Coalesced",c.messages.length,"messages from request",d.id)}}function b(a,b){if(this.transportSend(a,b),b.expired=!1,!a.sync){var c=this.getConfiguration().maxNetworkDelay,d=c;b.metaConnect===!0&&(d+=this.getAdvice().timeout),this._debug("Transport",this.getType(),"waiting at most",d,"ms for the response, maxNetworkDelay",c);var e=this;b.timeout=this.setTimeout(function(){b.expired=!0;var c="Request "+b.id+" of transport "+e.getType()+" exceeded "+d+" ms max network delay",f={reason:c},g=b.xhr;f.httpCode=e.xhrStatus(g),e.abortXHR(g),e._debug(c),e.complete(b,!1,b.metaConnect),a.onFailure(g,a.messages,f)},d)}}function c(a){var c=++i,d={id:c,metaConnect:!1};k.length<this.getConfiguration().maxConnections-1?(k.push(d),b.call(this,a,d)):(this._debug("Transport",this.getType(),"queueing request",c,"envelope",a),l.push([a,d]))}function d(a){var b=a.id;if(this._debug("Transport",this.getType(),"metaConnect complete, request",b),null!==j&&j.id!==b)throw"Longpoll request mismatch, completing request "+b;j=null}function e(b,d){var e=org.cometd.Utils.inArray(b,k);if(e>=0&&k.splice(e,1),l.length>0){var f=l.shift(),g=f[0],h=f[1];if(this._debug("Transport dequeued request",h.id),d)this.getConfiguration().autoBatch&&a.call(this,g),c.call(this,g),this._debug("Transport completed request",b.id,g);else{var i=this;this.setTimeout(function(){i.complete(h,!1,h.metaConnect);var a={reason:"Previous request failed"},b=h.xhr;a.httpCode=i.xhrStatus(b),g.onFailure(b,g.messages,a)},0)}}}function f(a){if(null!==j)throw"Concurrent metaConnect requests not allowed, request id="+j.id+" not yet completed";var c=++i;this._debug("Transport",this.getType(),"metaConnect send, request",c,"envelope",a);var d={id:c,metaConnect:!0};b.call(this,a,d),j=d}var g=new org.cometd.Transport,h=org.cometd.Transport.derive(g),i=0,j=null,k=[],l=[];return h.complete=function(a,b,c){c?d.call(this,a):e.call(this,a,b)},h.transportSend=function(){throw"Abstract"},h.transportSuccess=function(a,b,c){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!0,b.metaConnect),c&&c.length>0?a.onSuccess(c):a.onFailure(b.xhr,a.messages,{httpCode:204}))},h.transportFailure=function(a,b,c){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!1,b.metaConnect),a.onFailure(b.xhr,a.messages,c))},h.send=function(a,b){b?f.call(this,a):c.call(this,a)},h.abort=function(){g.abort();for(var a=0;a<k.length;++a){var b=k[a];this._debug("Aborting request",b),this.abortXHR(b.xhr)}j&&(this._debug("Aborting metaConnect request",j),this.abortXHR(j.xhr)),this.reset()},h.reset=function(){g.reset(),j=null,k=[],l=[]},h.abortXHR=function(a){if(a)try{a.abort()}catch(b){this._debug(b)}},h.xhrStatus=function(a){if(a)try{return a.status}catch(b){this._debug(b)}return-1},h},org.cometd.LongPollingTransport=function(){var a=new org.cometd.RequestTransport,b=org.cometd.Transport.derive(a),c=!0;return b.accept=function(a,b){return c||!b},b.xhrSend=function(){throw"Abstract"},b.transportSend=function(a,b){this._debug("Transport",this.getType(),"sending request",b.id,"envelope",a);var d=this;try{var e=!0;b.xhr=this.xhrSend({transport:this,url:a.url,sync:a.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(a.messages),onSuccess:function(e){d._debug("Transport",d.getType(),"received response",e);var f=!1;try{var g=d.convertToMessages(e);0===g.length?(c=!1,d.transportFailure(a,b,{httpCode:204})):(f=!0,d.transportSuccess(a,b,g))}catch(h){if(d._debug(h),!f){c=!1;var i={exception:h};i.httpCode=d.xhrStatus(b.xhr),d.transportFailure(a,b,i)}}},onError:function(f,g){c=!1;var h={reason:f,exception:g};h.httpCode=d.xhrStatus(b.xhr),e?d.setTimeout(function(){d.transportFailure(a,b,h)},0):d.transportFailure(a,b,h)}}),e=!1}catch(f){c=!1,this.setTimeout(function(){d.transportFailure(a,b,{exception:f})},0)}},b.reset=function(){a.reset(),c=!0},b},org.cometd.CallbackPollingTransport=function(){var a=new org.cometd.RequestTransport,b=org.cometd.Transport.derive(a),c=2e3;return b.accept=function(){return!0},b.jsonpSend=function(){throw"Abstract"},b.transportSend=function(a,b){for(var d=this,e=0,f=a.messages.length,g=[];f>0;){var h=org.cometd.JSON.toJSON(a.messages.slice(e,e+f)),i=a.url.length+encodeURI(h).length;if(i>c){if(1===f)return this.setTimeout(function(){d.transportFailure(a,b,{reason:"Bayeux message too big, max is "+c})},0),void 0;--f}else g.push(f),e+=f,f=a.messages.length-e}var j=a;if(g.length>1){var k=0,l=g[0];this._debug("Transport",this.getType(),"split",a.messages.length,"messages into",g.join(" + ")),j=this._mixin(!1,{},a),j.messages=a.messages.slice(k,l),j.onSuccess=a.onSuccess,j.onFailure=a.onFailure;for(var m=1;m<g.length;++m){var n=this._mixin(!1,{},a);k=l,l+=g[m],n.messages=a.messages.slice(k,l),n.onSuccess=a.onSuccess,n.onFailure=a.onFailure,this.send(n,b.metaConnect)}}this._debug("Transport",this.getType(),"sending request",b.id,"envelope",j);try{var o=!0;this.jsonpSend({transport:this,url:j.url,sync:j.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(j.messages),onSuccess:function(a){var c=!1;try{var e=d.convertToMessages(a);0===e.length?d.transportFailure(j,b,{httpCode:204}):(c=!0,d.transportSuccess(j,b,e))}catch(f){d._debug(f),c||d.transportFailure(j,b,{exception:f})}},onError:function(a,c){var e={reason:a,exception:c};o?d.setTimeout(function(){d.transportFailure(j,b,e)},0):d.transportFailure(j,b,e)}}),o=!1}catch(p){this.setTimeout(function(){d.transportFailure(j,b,{exception:p})},0)}},b},org.cometd.WebSocketTransport=function(){function a(){var a=d.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",a);var b=this,c=null,e=d.getConfiguration().connectTimeout;e>0&&(c=this.setTimeout(function(){c=null,m||(b._debug("Transport",b.getType(),"timed out while connecting to URL",a,":",e,"ms"),b.onClose(1002,"Connect Timeout"))},e));var f=new org.cometd.WebSocket(a),g=function(){return b._debug("WebSocket opened",f),c&&(b.clearTimeout(c),c=null),f!==l?(b._debug("Ignoring open event, WebSocket",l),void 0):(b.onOpen(),void 0)},h=function(a){var d=a?a.code:1e3,e=a?a.reason:void 0;return b._debug("WebSocket closed",d,"/",e,f),c&&(b.clearTimeout(c),c=null),f!==l?(b._debug("Ignoring close event, WebSocket",l),void 0):(b.onClose(d,e),void 0)},i=function(a){return b._debug("WebSocket message",a,f),f!==l?(b._debug("Ignoring message event, WebSocket",l),void 0):(b.onMessage(a),void 0)};f.onopen=g,f.onclose=h,f.onerror=function(){h({code:1002,reason:"Error"})},f.onmessage=i,l=f,this._debug("Transport",this.getType(),"configured callbacks on",f)}function b(a,b){var c=org.cometd.JSON.toJSON(a.messages);l.send(c),this._debug("Transport",this.getType(),"sent",a,"metaConnect =",b);var d=this.getConfiguration().maxNetworkDelay,e=d;b&&(e+=this.getAdvice().timeout,n=!0);for(var f=this,g=l,h=[],i=0;i<a.messages.length;++i){var j=a.messages[i];j.id&&(h.push(j.id),k[j.id]=this.setTimeout(function(){f.webSocketClose(g,1e3,"Timeout")},e))}this._debug("Transport",this.getType(),"waiting at most",e,"ms for messages",h,"maxNetworkDelay",d,", timeouts:",k)}function c(c,d){try{null===l?a.call(this):m&&b.call(this,c,d)}catch(e){var f=l;this.setTimeout(function(){c.onFailure(f,c.messages,{exception:e})},0)}}var d,e,f=new org.cometd.Transport,g=org.cometd.Transport.derive(f),h=!0,i=!1,j={},k={},l=null,m=!1,n=!1;return g.onOpen=function(){this._debug("Transport",this.getType(),"opened",l),m=!0,i=!0,this._debug("Sending pending messages",j);for(var a in j){var c=j[a],d=c[0],f=c[1];e=d.onSuccess,b.call(this,d,f)}},g.onMessage=function(a){this._debug("Transport",this.getType(),"received websocket message",a,l);for(var b=!1,c=this.convertToMessages(a.data),d=[],f=0;f<c.length;++f){var g=c[f];if((/^\/meta\//.test(g.channel)||void 0===g.data)&&g.id){d.push(g.id);var h=k[g.id];h&&(this.clearTimeout(h),delete k[g.id],this._debug("Transport",this.getType(),"removed timeout for message",g.id,", timeouts",k))}"/meta/connect"===g.channel&&(n=!1),"/meta/disconnect"!==g.channel||n||(b=!0)}for(var i=!1,m=0;m<d.length;++m){var o=d[m];for(var p in j){var q=p.split(","),r=org.cometd.Utils.inArray(o,q);if(r>=0){i=!0,q.splice(r,1);var s=j[p][0],t=j[p][1];delete j[p],q.length>0&&(j[q.join(",")]=[s,t]);break}}}i&&this._debug("Transport",this.getType(),"removed envelope, envelopes",j),e.call(this,c),b&&this.webSocketClose(l,1e3,"Disconnect")},g.onClose=function(a,b){this._debug("Transport",this.getType(),"closed",a,b,l),h=i;for(var c in k)this.clearTimeout(k[c]);k={};for(var d in j){var e=j[d][0],f=j[d][1];f&&(n=!1),e.onFailure(l,e.messages,{websocketCode:a,reason:b})}j={},m&&this.webSocketClose(l,1e3,"Close"),m=!1,l=null},g.registered=function(a,b){f.registered(a,b),d=b},g.accept=function(){return h&&!!org.cometd.WebSocket&&d.websocketEnabled!==!1},g.send=function(a,b){this._debug("Transport",this.getType(),"sending",a,"metaConnect =",b);for(var d=[],e=0;e<a.messages.length;++e){var f=a.messages[e];f.id&&d.push(f.id)}j[d.join(",")]=[a,b],this._debug("Transport",this.getType(),"stored envelope, envelopes",j),c.call(this,a,b)},g.webSocketClose=function(a,b,c){if(a)try{a.close(b,c)}catch(d){this._debug(d)}},g.abort=function(){f.abort(),this.webSocketClose(l,1001,"Abort"),this.reset()},g.reset=function(){f.reset(),m&&this.webSocketClose(l,1e3,"Reset"),h=!0,i=!1,k={},j={},l=null,m=!1,e=null},g},org.cometd.Cometd=function(a){function b(a,b){try{return a[b]}catch(c){return void 0}}function c(a){return org.cometd.Utils.isString(a)}function d(a){return void 0===a||null===a?!1:"function"==typeof a}function e(a,b){if(window.console){var c=window.console[a];d(c)&&c.apply(window.console,b)}}function f(a){if(cb._debug("Configuring cometd object with",a),c(a)&&(a={url:a}),a||(a={}),ub=cb._mixin(!1,ub,a),!ub.url)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var b=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(ub.url),d=b[2],e=b[8],f=b[9];if(eb=cb._isCrossDomain(d),ub.appendMessageTypeToURL)if(void 0!==f&&f.length>0)cb._info("Appending message type to URI "+e+f+" is not supported, disabling 'appendMessageTypeToURL' configuration"),ub.appendMessageTypeToURL=!1;else{var g=e.split("/"),h=g.length-1;e.match(/\/$/)&&(h-=1),g[h].indexOf(".")>=0&&(cb._info("Appending message type to URI "+e+" is not supported, disabling 'appendMessageTypeToURL' configuration"),ub.appendMessageTypeToURL=!1)}}function g(){for(var a in mb)for(var b=mb[a],c=0;c<b.length;++c){var d=b[c];d&&!d.listener&&(delete b[c],cb._debug("Removed subscription",d,"for channel",a))
}}function h(a){gb!==a&&(cb._debug("Status",gb,"->",a),gb=a)}function i(){return"disconnecting"===gb||"disconnected"===gb}function j(){return++hb}function k(a,b,c,e,f){try{return b.call(a,e)}catch(g){cb._debug("Exception during execution of extension",c,g);var h=cb.onExtensionException;if(d(h)){cb._debug("Invoking extension exception callback",c,g);try{h.call(cb,g,c,f,e)}catch(i){cb._info("Exception during execution of exception callback in extension",c,i)}}return e}}function l(a){for(var b=0;b<pb.length&&void 0!==a&&null!==a;++b){var c=ub.reverseIncomingExtensions?pb.length-1-b:b,e=pb[c],f=e.extension.incoming;if(d(f)){var g=k(e.extension,f,e.name,a,!1);a=void 0===g?a:g}}return a}function m(a){for(var b=0;b<pb.length&&void 0!==a&&null!==a;++b){var c=pb[b],e=c.extension.outgoing;if(d(e)){var f=k(c.extension,e,c.name,a,!0);a=void 0===f?a:f}}return a}function n(a,b){var c=mb[a];if(c&&c.length>0)for(var e=0;e<c.length;++e){var f=c[e];if(f)try{f.callback.call(f.scope,b)}catch(g){cb._debug("Exception during notification",f,b,g);var h=cb.onListenerException;if(d(h)){cb._debug("Invoking listener exception callback",f,g);try{h.call(cb,g,f.handle,f.listener,b)}catch(i){cb._info("Exception during execution of listener callback",f,i)}}}}}function o(a,b){n(a,b);for(var c=a.split("/"),d=c.length-1,e=d;e>0;--e){var f=c.slice(0,e).join("/")+"/*";e===d&&n(f,b),f+="*",n(f,b)}}function p(){null!==ob&&org.cometd.Utils.clearTimeout(ob),ob=null}function q(a){p();var b=qb.interval+nb;cb._debug("Function scheduled in",b,"ms, interval =",qb.interval,"backoff =",nb,a),ob=org.cometd.Utils.setTimeout(cb,a,b)}function r(a,b,c,e){for(var f=0;f<b.length;++f){var g=b[f];g.id=""+j(),ib&&(g.clientId=ib);var h=void 0;d(g._callback)&&(h=g._callback,delete g._callback),g=m(g),void 0!==g&&null!==g?(b[f]=g,h&&(rb[g.id]=h)):b.splice(f--,1)}if(0!==b.length){var i=ub.url;ub.appendMessageTypeToURL&&(i.match(/\/$/)||(i+="/"),e&&(i+=e));var k={url:i,sync:a,messages:b,onSuccess:function(a){try{vb.call(cb,a)}catch(b){cb._debug("Exception during handling of messages",b)}},onFailure:function(a,b,c){try{c.connectionType=cb.getTransport().getType(),wb.call(cb,a,b,c)}catch(d){cb._debug("Exception during handling of failure",d)}}};cb._debug("Send",k),ab.send(k,c)}}function s(a){jb>0||lb===!0?kb.push(a):r(!1,[a],!1)}function t(){nb=0}function u(){nb<ub.maxBackoff&&(nb+=ub.backoffIncrement)}function v(){++jb}function w(){var a=kb;kb=[],a.length>0&&r(!1,a,!1)}function x(){if(--jb,0>jb)throw"Calls to startBatch() and endBatch() are not paired";0!==jb||i()||lb||w()}function y(){if(!i()){var a={channel:"/meta/connect",connectionType:ab.getType()};tb||(a.advice={timeout:0}),h("connecting"),cb._debug("Connect sent",a),r(!1,[a],!0,"connect"),h("connected")}}function z(){h("connecting"),q(function(){y()})}function A(a){a&&(qb=cb._mixin(!1,{},ub.advice,a),cb._debug("New advice",qb))}function B(a){p(),a&&ab.abort(),ib=null,h("disconnected"),jb=0,t(),kb.length>0&&(wb.call(cb,void 0,kb,{reason:"Disconnected"}),kb=[])}function C(a){ib=null,g(),i()?(fb.reset(),A(ub.advice)):A(cb._mixin(!1,qb,{reconnect:"retry"})),jb=0,lb=!0,bb=a;var b="1.0",c=fb.findTransportTypes(b,eb,ub.url),d={version:b,minimumVersion:"0.9",channel:"/meta/handshake",supportedConnectionTypes:c,advice:{timeout:qb.timeout,interval:qb.interval}},e=cb._mixin(!1,{},bb,d);ab=fb.negotiateTransport(c,b,eb,ub.url),cb._debug("Initial transport is",ab.getType()),h("handshaking"),cb._debug("Handshake sent",e),r(!1,[e],!1,"handshake")}function D(){h("handshaking"),lb=!0,q(function(){C(bb)})}function E(a){o("/meta/handshake",a),o("/meta/unsuccessful",a);var b=!i()&&"none"!==qb.reconnect;b?(u(),D()):B(!1)}function F(a){if(a.successful){ib=a.clientId;var b=fb.negotiateTransport(a.supportedConnectionTypes,a.version,eb,ub.url);if(null===b)throw"Could not negotiate transport with server; client "+fb.findTransportTypes(a.version,eb,ub.url)+", server "+a.supportedConnectionTypes;ab!==b&&(cb._debug("Transport",ab,"->",b),ab=b),lb=!1,w(),a.reestablish=sb,sb=!0,o("/meta/handshake",a);var c=i()?"none":qb.reconnect;switch(c){case"retry":t(),z();break;case"none":B(!1);break;default:throw"Unrecognized advice action "+c}}else E(a)}function G(a){E({successful:!1,failure:a,channel:"/meta/handshake",advice:{reconnect:"retry",interval:nb}})}function H(a){o("/meta/connect",a),o("/meta/unsuccessful",a);var b=i()?"none":qb.reconnect;switch(b){case"retry":z(),u();break;case"handshake":fb.reset(),t(),D();break;case"none":B(!1);break;default:throw"Unrecognized advice action"+b}}function I(a){if(tb=a.successful){o("/meta/connect",a);var b=i()?"none":qb.reconnect;switch(b){case"retry":t(),z();break;case"none":B(!1);break;default:throw"Unrecognized advice action "+b}}else H(a)}function J(a){tb=!1,H({successful:!1,failure:a,channel:"/meta/connect",advice:{reconnect:"retry",interval:nb}})}function K(a){B(!0),o("/meta/disconnect",a),o("/meta/unsuccessful",a)}function L(a){a.successful?(B(!1),o("/meta/disconnect",a)):K(a)}function M(a){K({successful:!1,failure:a,channel:"/meta/disconnect",advice:{reconnect:"none",interval:0}})}function N(a){o("/meta/subscribe",a),o("/meta/unsuccessful",a)}function O(a){a.successful?o("/meta/subscribe",a):N(a)}function P(a){N({successful:!1,failure:a,channel:"/meta/subscribe",advice:{reconnect:"none",interval:0}})}function Q(a){o("/meta/unsubscribe",a),o("/meta/unsuccessful",a)}function R(a){a.successful?o("/meta/unsubscribe",a):Q(a)}function S(a){Q({successful:!1,failure:a,channel:"/meta/unsubscribe",advice:{reconnect:"none",interval:0}})}function T(a){var b=rb[a.id];d(b)&&(delete rb[a.id],b.call(cb,a))}function U(a){T(a),o("/meta/publish",a),o("/meta/unsuccessful",a)}function V(a){void 0===a.successful?a.data?o(a.channel,a):cb._debug("Unknown message",a):a.successful?(T(a),o("/meta/publish",a)):U(a)}function W(a,b){U({successful:!1,failure:b,channel:a.channel,advice:{reconnect:"none",interval:0}})}function X(a){if(a=l(a),void 0!==a&&null!==a){A(a.advice);var b=a.channel;switch(b){case"/meta/handshake":F(a);break;case"/meta/connect":I(a);break;case"/meta/disconnect":L(a);break;case"/meta/subscribe":O(a);break;case"/meta/unsubscribe":R(a);break;default:V(a)}}}function Y(a){var b=mb[a];if(b)for(var c=0;c<b.length;++c)if(b[c])return!0;return!1}function Z(a,b){var e={scope:a,method:b};if(d(a))e.scope=void 0,e.method=a;else if(c(b)){if(!a)throw"Invalid scope "+a;if(e.method=a[b],!d(e.method))throw"Invalid callback "+b+" for scope "+a}else if(!d(b))throw"Invalid callback "+b;return e}function $(a,b,c,d){var e=Z(b,c);cb._debug("Adding listener on",a,"with scope",e.scope,"and callback",e.method);var f={channel:a,scope:e.scope,callback:e.method,listener:d},g=mb[a];g||(g=[],mb[a]=g);var h=g.push(f)-1;return f.id=h,f.handle=[a,h],cb._debug("Added listener",f,"for channel",a,"having id =",h),f.handle}function _(a){var b=mb[a[0]];b&&(delete b[a[1]],cb._debug("Removed listener",a))}var ab,bb,cb=this,db=a||"default",eb=!1,fb=new org.cometd.TransportRegistry,gb="disconnected",hb=0,ib=null,jb=0,kb=[],lb=!1,mb={},nb=0,ob=null,pb=[],qb={},rb={},sb=!1,tb=!1,ub={connectTimeout:0,maxConnections:2,backoffIncrement:1e3,maxBackoff:6e4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:1e4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,advice:{timeout:6e4,interval:0,reconnect:"retry"}};this._mixin=function(a,c){for(var d=c||{},e=2;e<arguments.length;++e){var f=arguments[e];if(void 0!==f&&null!==f)for(var g in f){var h=b(f,g),i=b(d,g);if(h!==c&&void 0!==h)if(a&&"object"==typeof h&&null!==h)if(h instanceof Array)d[g]=this._mixin(a,i instanceof Array?i:[],h);else{var j="object"!=typeof i||i instanceof Array?{}:i;d[g]=this._mixin(a,j,h)}else d[g]=h}}return d},this._warn=function(){e("warn",arguments)},this._info=function(){"warn"!==ub.logLevel&&e("info",arguments)},this._debug=function(){"debug"===ub.logLevel&&e("debug",arguments)},this._isCrossDomain=function(a){return a&&a!==window.location.host};var vb,wb;this.send=s,this.receive=X,vb=function(a){cb._debug("Received",a);for(var b=0;b<a.length;++b){var c=a[b];X(c)}},wb=function(a,b,c){cb._debug("handleFailure",a,b,c);for(var d=0;d<b.length;++d){var e=b[d],f=cb._mixin(!1,{message:e,transport:a},c),g=e.channel;switch(g){case"/meta/handshake":G(f);break;case"/meta/connect":J(f);break;case"/meta/disconnect":M(f);break;case"/meta/subscribe":P(f);break;case"/meta/unsubscribe":S(f);break;default:W(e,f)}}},this.registerTransport=function(a,b,c){var e=fb.add(a,b,c);return e&&(this._debug("Registered transport",a),d(b.registered)&&b.registered(a,this)),e},this.getTransportTypes=function(){return fb.getTransportTypes()},this.unregisterTransport=function(a){var b=fb.remove(a);return null!==b&&(this._debug("Unregistered transport",a),d(b.unregistered)&&b.unregistered()),b},this.unregisterTransports=function(){fb.clear()},this.findTransport=function(a){return fb.find(a)},this.configure=function(a){f.call(this,a)},this.init=function(a,b){this.configure(a),this.handshake(b)},this.handshake=function(a){h("disconnected"),sb=!1,C(a)},this.disconnect=function(a,b){if(!i()){void 0===b&&"boolean"!=typeof a&&(b=a,a=!1);var c={channel:"/meta/disconnect"},d=this._mixin(!1,{},b,c);h("disconnecting"),r(a===!0,[d],!1,"disconnect")}},this.startBatch=function(){v()},this.endBatch=function(){x()},this.batch=function(a,b){var c=Z(a,b);this.startBatch();try{c.method.call(c.scope),this.endBatch()}catch(d){throw this._debug("Exception during execution of batch",d),this.endBatch(),d}},this.addListener=function(a,b,d){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";return $(a,b,d,!0)},this.removeListener=function(a){if(!org.cometd.Utils.isArray(a))throw"Invalid argument: expected subscription, not "+a;_(a)},this.clearListeners=function(){mb={}},this.subscribe=function(a,b,e,f){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";if(i())throw"Illegal state: already disconnected";d(b)&&(f=e,e=b,b=void 0);var g=!Y(a),h=$(a,b,e,!1);if(g){var j={channel:"/meta/subscribe",subscription:a},k=this._mixin(!1,{},f,j);s(k)}return h},this.unsubscribe=function(a,b){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(i())throw"Illegal state: already disconnected";this.removeListener(a);var c=a[0];if(!Y(c)){var d={channel:"/meta/unsubscribe",subscription:c},e=this._mixin(!1,{},b,d);s(e)}},this.clearSubscriptions=function(){g()},this.publish=function(a,b,e,f){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";if(i())throw"Illegal state: already disconnected";d(b)?(f=b,b=e={}):d(e)&&(f=e,e={});var g={channel:a,data:b,_callback:f},h=this._mixin(!1,{},e,g);s(h)},this.getStatus=function(){return gb},this.isDisconnected=i,this.setBackoffIncrement=function(a){ub.backoffIncrement=a},this.getBackoffIncrement=function(){return ub.backoffIncrement},this.getBackoffPeriod=function(){return nb},this.setLogLevel=function(a){ub.logLevel=a},this.registerExtension=function(a,b){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: extension name must be a string";for(var e=!1,f=0;f<pb.length;++f){var g=pb[f];if(g.name===a){e=!0;break}}return e?(this._info("Could not register extension with name",a,"since another extension with the same name already exists"),!1):(pb.push({name:a,extension:b}),this._debug("Registered extension",a),d(b.registered)&&b.registered(a,this),!0)},this.unregisterExtension=function(a){if(!c(a))throw"Illegal argument type: extension name must be a string";for(var b=!1,e=0;e<pb.length;++e){var f=pb[e];if(f.name===a){pb.splice(e,1),b=!0,this._debug("Unregistered extension",a);var g=f.extension;d(g.unregistered)&&g.unregistered();break}}return b},this.getExtension=function(a){for(var b=0;b<pb.length;++b){var c=pb[b];if(c.name===a)return c.extension}return null},this.getName=function(){return db},this.getClientId=function(){return ib},this.getURL=function(){return ub.url},this.getTransport=function(){return ab},this.getConfiguration=function(){return this._mixin(!0,{},ub)},this.getAdvice=function(){return this._mixin(!0,{},qb)},org.cometd.WebSocket=window.WebSocket,org.cometd.WebSocket||(org.cometd.WebSocket=window.MozWebSocket)},"function"==typeof define&&define.amd&&define(function(){return org.cometd}),function(a){function b(a,b){function c(a,b){if(b)for(var c in b)"content-type"!==c.toLowerCase()&&a.setRequestHeader(c,b[c])}function d(){var d=new b.LongPollingTransport,e=b.Transport.derive(d);return e.xhrSend=function(b){return a.ajax({url:b.url,async:b.sync!==!0,type:"POST",contentType:"application/json;charset=UTF-8",data:b.body,xhrFields:{withCredentials:!0},beforeSend:function(a){return c(a,b.headers),!0},success:b.onSuccess,error:function(a,c,d){b.onError(c,d)}})},e}function e(){var d=new b.CallbackPollingTransport,e=b.Transport.derive(d);return e.jsonpSend=function(b){a.ajax({url:b.url,async:b.sync!==!0,type:"GET",dataType:"jsonp",jsonp:"jsonp",data:{message:b.body},beforeSend:function(a){return c(a,b.headers),!0},success:b.onSuccess,error:function(a,c,d){b.onError(c,d)}})},e}return b.JSON.toJSON=JSON.stringify,b.JSON.fromJSON=JSON.parse,a.Cometd=function(a){var c=new b.Cometd(a);return b.WebSocket&&c.registerTransport("websocket",new b.WebSocketTransport),c.registerTransport("long-polling",new d),c.registerTransport("callback-polling",new e),c},a.cometd=new a.Cometd,a.cometd}"function"==typeof define&&define.amd?define(["jquery","org/cometd"],b):b(a,org.cometd)}(jQuery),angular.module("c8y.core",["c8y.config"]),angular.module("c8y.core").factory("c8yAgent",["c8yManagedObject",function(a){"use strict";var b="com_cumulocity_model_Agent",c={};return c.agentify=function(a){return a[b]={name:"agent X",type:"normalAgent",contactPeriod:60},a},c.list=function(c){var d={fragmentType:b};return angular.isObject(c)&&(d=angular.extend(d,c)),a.list(d)},c.detail=function(b){return a.detail(b)},c.agentFragment=b,c}]),angular.module("c8y.core").factory("c8yAlarms",["$http","c8yBase",function(a,b){"use strict";var c={},d=b.clean,e="application/vnd.com.nsn.cumulocity.alarm+json;",f="alarm/alarms",g=f+"/reports",h={headers:{"Content-Type":e}};return c.severity={WARNING:"WARNING",MINOR:"MINOR",MAJOR:"MAJOR",CRITICAL:"CRITICAL"},c.severityList=Object.keys(c.severity),c.status={CLEARED:"CLEARED",ACTIVE:"ACTIVE",ACKNOWLEDGED:"ACKNOWLEDGED"},c.reservedKeys=["history","id","severity","status","self","source","creationTime","time","text"],c.statusList=Object.keys(c.status),c.list=function(c){return c=c||{},c.pageSize=c.pageSize||10,c.withTotalPages=!0,c.dateFrom||(c.dateFrom="1970-01-01"),c.dateTo||(c.dateTo=moment().add(1,"day").format("YYYY-MM-DD")),a.get(b.url(f),{params:c})},c.detail=function(c){return angular.isObject(c)&&(c=c.id),a.get(b.url(f+"/"+c))},c.create=function(c){return c=d(c),a.post(b.url(f),c,h)},c.update=function(c,e){return angular.isObject(c)&&(c=c.id),e=d(e),a.put(b.url(f+"/"+c),e,h)},c.acknowledgedBy=function(a){var b=a.history&&a.history.auditRecords||[],c="--";return"ACKNOWLEDGED"===a.status&&(c=b[b.length-1].user),b.forEach(function(a){var b=a.changes||[],d=!1;return b.forEach(function(a){return"status"===a.attribute&&"ACKNOWLEDGED"===a.newValue?(d=!0,!1):void 0}),d?(c=a.user||c,!1):void 0}),c},c.ackTime=function(a){var b=a.history&&a.history.auditRecords||[],c=b.length?b[b.length-1].creationTime:void 0;return b.forEach(function(a){var b=a.changes||[],d=!1;return b.forEach(function(b){return"status"===b.attribute&&"ACKNOWLEDGED"===b.newValue?(c=a.creationTime,d=!0,!1):void 0}),d?!1:void 0}),c},c.alarmDuration=function(a){var b=a.history&&a.history.auditRecords||[],c=a.firstOccurrenceTime||a.time,d=b.length?b[b.length-1].creationTime:void 0,e="";if(b.forEach(function(a){var b=a.changes||[],c=!1;return b.forEach(function(b){return"status"===b.attribute&&"CLEARED"===b.newValue?(d=a.creationTime,c=!0,!1):void 0}),c?!1:void 0}),c&&d){var f=moment(c),g=moment(d);e=moment.duration(f.diff(g)).humanize()}return e},c.parseChanges=function(a){var b=a||[],c=[];return b.forEach(function(a){return"revision"===a.attribute?!0:(c.push(a.attribute+": "+a.previousValue+" > "+a.newValue),void 0)}),c.join(" ; ")},c.reports=function(){return{downtimeDuration:function(c){return c=c||{},c.dateFrom||(c.dateFrom="1970-01-01"),c.dateTo||(c.dateTo=moment().add(1,"day").format("YYYY-MM-DD")),a.get(b.url(g+"/downtimeDuration"+(c.id?"/"+c.id:"")),{params:c})}}},c}]),angular.module("c8y.core").factory("c8yApplication",["$http","$location","$q","c8yBase",function(a,b,c,d){"use strict";function e(a){return delete a.type,delete a.key,a}function f(b){if("all"in b){var e=c.defer(),f=e.promise,g=2,h=[],j=function(){g||e.resolve({applications:h})},k=function(a){a.applications.forEach(function(a){h.push(a)}),g--,j()};return a.get(d.url("application/applicationsByOwner/"+d.user().tenant),{params:b}).success(k),a.get(d.url("application/applicationsByTenant/"+d.user().tenant),{params:b}).success(k),f.success=function(a){f.then(a,angular.noop)},e.promise}return"tenant"in b?a.get(d.url("application/applicationsByTenant/"+d.user().tenant),{params:b}):b.owner?a.get(d.url(i),{params:b}):a.get(d.url("application/applicationsByOwner/"+d.user().tenant),{params:b})}function g(a){return b.protocol()+"://"+b.host()+(80!==b.port()?":"+b.port():"")+"/apps/"+a.contextPath}var h={},i="application/applications",j="application/vnd.com.nsn.cumulocity.application+json;",k={headers:{"Content-Type":j,Accept:j}};return h.list=function(a){return a=a||{},a.pageSize=a.pageSize||d.PAGESIZE,f(a)},h.detail=function(b){return a.get(d.url(i+"/"+b.id))},h.remove=function(b){return a.delete(d.url(i+"/"+b.id))},h.update=function(b,c){return angular.isObject(b)&&(c=c||b,b=b.id),c=e(angular.copy(c)),a.put(d.url(i+"/"+b),c,angular.copy(k))},h.create=function(b){return a.post(d.url(i),b,angular.copy(k))},h.createApplicationURL=function(a){return"HOSTED"===a.type?g(a):a.externalUrl},h.buildService=function(a){var b=angular.copy(h);return["list"].forEach(function(c){var d=b[c];b[c]=function(b){return b=b||{},angular.extend(b,a),d(b)}}),b},h}]),angular.module("c8y.core").factory("c8yAuth",["$http","$location","$rootScope","c8yBase",function(a,b,c,d){"use strict";function e(){var a=!!b.host().match(/localhost|lvh\.me/),c=!!b.absUrl().match(/\?showTenant/);return a||c}function f(a,b,c){var d=(e()?a+"/":"")+b+":"+c;return btoa(d)}function g(b,e,g,i){var j,k=f(b,e,g);return b&&(m=b),j=a({url:d.url("user/currentUser"),method:"get",headers:{UseXBasic:!0,Accept:n,Authorization:"Basic "+k}}),j.success(function(a){m=h(a.self)||m;var b={tenant:m,username:a.userName,token:k};d.save(b),i?window.localStorage.setItem("udata",JSON.stringify(b)):window.localStorage.setItem("udata",null),c.user=a,delete c.nouser,c.$broadcast("login",a)}),j}function h(a){return a.match(/user\/(.*)\/users/)[1]}function i(){var b=window.localStorage&&window.localStorage.getItem("udata"),e=null;return angular.isDefined(i._request)?i._request:(b&&angular.fromJson(b)?(b=angular.fromJson(b),m=b.tenant,e=a({url:d.url("user/currentUser"),method:"get",headers:{UseXBasic:!0,Accept:n,Authorization:"Basic "+b.token}}),e.success(function(a){var e=h(a.self);d.save({tenant:e,username:a.userName,token:b.token}),a.tenant=e,c.user=a,delete c.nouser,c.$broadcast("login",a)}).error(function(){c.nouser=1,window.localStorage.setItem("udata",null)}),e.tenant=b.tenant,e.username=b.username):c.nouser=1,i._request=e,e)}function j(a){var b=d.user().tenant,c=d.user().username,e=f(b,c,a),g={tenant:b,username:c,token:e},h=window.localStorage.getItem("udata");d.save(g),h&&window.localStorage.setItem("udata",JSON.stringify(g))}function k(){c.nouser=1,c.user=void 0,c.$broadcast("stopapp"),window.localStorage.setItem("udata",null)}var l=b.host().match(/(\w+)cumulocity.com/)||[],m=l[1],n="application/vnd.com.nsn.cumulocity.user+json";return i(),{login:g,logout:k,trySavedLogin:i,useTenant:e,updatePassword:j}}]),angular.module("c8y.core").factory("c8yBase",["$rootScope","$http","configApp",function(a,b,c){"use strict";function d(c){i=a.currentUser={username:c.username,tenant:c.tenant},h=c.token,b.defaults.headers.common.Authorization="Basic "+h,b.defaults.headers.common.UseXBasic=!0}function e(a,b){var c={headers:{"Content-Type":"application/vnd.com.nsn.cumulocity."+a+"+json"}};return b&&(c.headers.Accept="application/vnd.com.nsn.cumulocity."+b+"+json"),c}function f(a){var b=angular.copy(a),c=["childAssets","childDevices","self","parents","owner","lastUpdated","id"];return c.forEach(function(a){delete b[a]}),b}function g(a){a.success=function(b){angular.isFunction(b)&&a.then(b)},a.error=function(b){angular.isFunction(b)&&a.then(angular.noop,b)}}var h,i;return b.defaults.headers.common["X-Cumulocity-Application-Key"]=c.apiKey,{url:function(a){return(c.baseUrl||"/")+a},clean:f,save:d,requestConfig:e,user:function(){return i},PAGESIZE:30,simulate$http:g}}]),angular.module("c8y.core").factory("c8yCepModule",["$http","$q","$timeout","c8yBase",function(a,b,c,d){"use strict";function e(a){var b="--"+f(),c=b+"\r\n"+'Content-Disposition: form-data; name="file"; filename="module.cep"\r\n'+"Content-Type: text/plain\r\n"+"\r\n"+a+"\r\n"+b;return c}function f(){return"83ff53821b7c"}function g(b){var c=b.id;if(!c)throw new Error("Module id no defined");return a.put(d.url(j+"/"+c),{status:b.status},{headers:{"Content-Type":k,Accept:k}})}function h(b){var c=b.id,g=d.url(j+(c?"/"+c:"")),h=e(b.body),i=c?"put":"post";return a[i](g,h,{headers:{"Content-Type":"multipart/form-data; boundary="+f(),Accept:k}})}var i={},j="cep/modules",k="application/vnd.com.nsn.cumulocity.cepModule+json";return i.list=function(b){var c={pageSize:d.PAGESIZE};return angular.isObject(b)&&(c=angular.extend(c,b)),a.get(d.url(j),{params:c})},i.detail=function(c){angular.isObject(c)&&(c=c.id);var e=b.defer(),f=d.url(j+"/"+c),g=null,h={id:c},i={headers:{"Content-Type":"text/plain",Accept:"text/plain"}},l=function(){if(g&&h){var a=/module (\w*);\s*\n*/;h.name=g.match(a)[1],h.body=g.replace(a,""),e.resolve(h)}};return a.get(f,{params:{a:1e4},headers:{"Content-Type":k,Accept:k}}).success(function(a){h=a,l()}),a.get(f,i).success(function(a){g=a,l()}),d.simulate$http(e.promise),e.promise},i.remove=function(b){return angular.isObject(b)&&(b=b.id),a["delete"](d.url(j+"/"+b))},i.save=function(a){var c,e=b.defer();return a.body?(a.name&&(a.body="module "+a.name+";\n"+a.body),c=h(a).error(function(a){e.reject(a)})):c=i.detail(a),c.success(function(b){a.status&&b.status!==a.status?(b.status=a.status,g(b).success(function(a){e.resolve(a)}).error(function(a){e.reject(a)})):e.resolve(b)}),d.simulate$http(e.promise),e.promise},i}]),angular.module("c8y.core").factory("c8yCustomers",["c8yManagedObject","c8yModel",function(a,b){"use strict";var c={},d=b.frag("c8y_Customer");return c.list=function(b){var c={type:d};return angular.isObject(b)&&(c=angular.extend(c,b)),a.list(c)},c.detail=function(b){return a.detail(b)},c.create=function(b){return b.type=d,a.create(b)},c.addDevice=function(b,c){return a.addChilDevice(b,c)},c.removeDevice=function(b,c){return a.addChilDevice(b,c)},c.listDevices=function(b){return a.childAssets(b)},c}]),angular.module("c8y.core").factory("c8yDeviceControl",["$http","$q","c8yBase",function(a,b,c){"use strict";function d(b){if(!b.deviceId)throw new Error("c8yDeviceControl: data must have a deviceId property");return a.post(c.url(g),b,h)}var e={},f="application/vnd.com.nsn.cumulocity.operation+json;",g="devicecontrol/operations",h={headers:{"Content-Type":f}};return e.status={PENDING:"PENDING",SUCCESSFUL:"SUCCESSFUL",EXECUTING:"EXECUTING",FAILED:"FAILED"},e.list=function(b){return b=b||{},b.pageSize=b.pageSize||c.PAGESIZE,b.withTotalPages=!0,a.get(c.url(g),{params:b})},e.detail=function(b){return angular.isObject(b)&&(b=b.id),a.get(c.url(g+"/"+b))},e.create=function(a,c){var e=[];return c||(c=[a]),angular.isArray(c)&&c.map(function(b){return angular.extend({deviceId:b.id||b.deviceId},a)}).forEach(function(a){e.push(d(a))}),b.all(e)},e.reservedKeys=["creationTime","deviceExternalIDs","deviceId","id","self","status"],e.update=function(b){var d=null;if(!angular.isObject(b))throw new Error("c8yDeviceControl: must receive an object");return d=b.id,b=c.clean(b),a.put(c.url(g+"/"+d),b,h)},e}]),angular.module("c8y.core").factory("c8yDeviceGroup",["c8yManagedObject",function(a){"use strict";function b(a){return!!a.childAssets.references.length}var c={},d="c8y_DeviceGroup";return c.list=function(b){var c={type:d,pageSize:1e4};return angular.isObject(b)&&(c=angular.extend(c,b)),a.list(c)},c.detail=function(b){return a.detail(b)},c.create=function(b){return b.type=d,a.create(b)},c.remove=function(c){return b(c)?!1:a.remove(c)},c.addDevice=function(b,c){return c.c8y_Groups=angular.isArray(c.c8y_Groups)?c.c8y_Groups:[],c.c8y_Groups.push({name:b.name,id:b.id}),a.update(c.id,{c8y_Groups:c.c8y_Groups}),a.addChildAsset(b,c)},c.removeDevice=function(b,c){return c.c8y_Groups=c.c8y_Groups.filter(function(a){return a.id!==b.id}),a.update(c.id,{c8y_Groups:c.c8y_Groups}),a.removeChildAsset(b,c)},c}]),angular.module("c8y.core").factory("c8yDevices",["$rootScope","c8yManagedObject","c8yBase","c8yAgent","c8yIdentity","configModel",function(a,b,c,d,e,f){"use strict";function g(a){return Math.floor(Math.random()*a)}function h(a){return Math.round(Math.random()*Math.pow(10,a))}function i(){var a={"c8y-democlient":"c8y-democlient.0.3.py"};return a}function j(b){var c=angular.fromJson(b);return c.managedObjects=c.references.map(function(a){return a.managedObject}),delete c.references,a.ajaxCount--,c}var k={};return k.createRandomDevice=function(a){var b={name:["CETAtest 815 Stuttgart","CETAtest 715 Ingolstadt","Cinterion EGS5","Munich"][g(4)]+" "+h(3),type:["org_raspberrypi_model_a","com_cinterion_egs5","de_ceta"][g(3)],webLink:["http://example.com",null][g(2)],c8y_Hardware:{serialNumber:h(5)+"-"+h(3)+"-"+h(2),model:["T-1000","HAL-3000","C3PO","Duemilenove","Model A"][g(5)],revision:"0.2.3"},c8y_Availability:{status:["AVAILABLE","UNAVAILABLE","CONNECTED"][g(3)],lastContact:moment().subtract("hours",h(2)).format()},c8y_ConnectivityStatus:{state:"active",traffic:h(1)+"MB",avgTraffic:h(1)+"MB",link:["http://example.com",null][g(2)]},c8y_Mobile:{cellid:h(12),imei:h(12),iccid:h(7)},c8y_Notes:["This device is under test","Should be changed on the 20-05-2013","Client reporting erroneous readings even no error is detected","",""][g(4)],c8y_Firmware:[{name:"Firmware v"+h(1)+"."+h(1),url:["http://example.com/",null][g(2)]},null][g(2)],c8y_Configuration:[{name:"Config v"+h(1)+"."+h(1),url:["http://example.com/",null][g(2)]},null][g(2)],c8y_Software:i(),c8y_Position:{lat:-90+180*Math.random(),lng:-180+360*Math.random()},c8y_SupportedOperations:["c8y_Firmware","c8y_Software","c8y_Config"],c8y_SupportedMeasurements:["c8y_SignalStrength","c8y_BatteryStrength","c8y_Temperature"],c8y_IsDevice:!0,c8y_Groups:null};return a||(b=k.agentify(b)),b},k.agentify=d.agentify,k.list=function(a){var d,e;if(a&&a.group)return a.pageSize=a.pageSize||c.PAGESIZE,d={transformResponse:j,params:a},b.childAssets(a.group,d);if(a&&a.parent)return a.pageSize=a.pageSize||c.PAGESIZE,d={transformResponse:j,params:a},b.childDevices(a.parent,d);e=f.filters.deviceFilter||{fragmentType:"c8y_IsDevice"},a&&a.text?(e=a,e.pageSize=100):angular.extend(e,a);var g=b.list(e);return a&&a.text&&g.then(function(a){var b=[];return angular.isArray(a.data.managedObjects)&&(a.data.managedObjects=a.data.managedObjects.filter(function(a){return a.c8y_IsDevice?b.indexOf(a.id)>-1?!1:(b.push(a.id),!0):!1})),a},angular.noop),g},k.detail=function(a){return b.detail(a,{withParents:!0})},k.supportsOperation=function(a,b){var c=a.c8y_SupportedOperations,d=angular.isArray(c)&&c.indexOf(b)>-1;return!!d},k.getSupportedOperations=function(a){var b=[];return angular.isArray(a.c8y_SupportedOperations)&&(b=a.c8y_SupportedOperations),b},k.supportsMeasurement=function(a,b){var c=a.c8y_SupportedMeasurements,d=angular.isArray(c)&&c.indexOf(b)>-1;return!!d},k.getSupportedMeasurements=function(a){var b=[];return angular.isArray(a.c8y_SupportedMeasurements)&&(b=a.c8y_SupportedMeasurements),b},k}]),angular.module("c8y.core").factory("c8yEvents",["$http","c8yBase",function(a,b){"use strict";var c={},d=b.clean,e="application/vnd.com.nsn.cumulocity.event+json;",f="event/events",g={headers:{"Content-Type":e}};return c.reservedKeys=["creationTime","id","self","source","text","time"],c.list=function(c){return c=c||{},c.pageSize=c.pageSize||b.PAGESIZE,c.withTotalPages=!0,a.get(b.url(f),{params:c})},c.detail=function(c){return angular.isObject(c)&&(c=c.id),a.get(b.url(f+"/"+c))},c.create=function(c){return c=d(c),a.post(b.url(f),c,g)},c.update=function(c,e){return angular.isObject(c)&&(c=c.id),e=d(e),a.put(b.url(f+"/"+c),e,g)},c}]),angular.module("c8y.core").factory("c8yFixtures",["c8yDevices","c8yAlarms","c8yManagedObject","c8yCustomers","c8yDeviceGroup","c8yDeviceControl","c8yAgent","c8yEvents","c8yMeasurements",function(a,b,c,d,e,f,g,h,i){"use strict";function j(b){for(var d=0;b>d;d++){var e=a.createRandomDevice();c.create(e)}}function k(c){var d=b.severityList,e=b.statusList;a.list().success(function(a){for(var f=a.managedObjects.map(function(a){return a.id}),g=0;c>g;g++){var h=Math.floor(Math.random()*d.length),i=Math.floor(Math.random()*e.length),j=Math.floor(Math.random()*f.length),k={severity:b.severity[d[h]],status:b.status[e[i]],text:"Alarm text Description "+Math.round(100*Math.random()),type:"alarm.arduino.lowbattery",source:{id:f[j]},time:moment().format("YYYY-MM-DDTH:mm:ss")};b.create(k)}})}function l(b){a.list().success(function(a){for(var c=a.managedObjects.map(function(a){return a.id}),d=0;b>d;d++){var e=["Device Turned on","Device Turned off","Led Blinked 2","Device Opened"][Math.floor(3*Math.random())],f=Math.floor(Math.random()*c.length),g={text:e+" "+Math.round(100*Math.random()),type:"c8y_DummyEvent",source:{id:c[f]},time:moment().format("YYYY-MM-DDTH:mm:ss")};h.create(g)}})}function m(){b.list().success(function(a){var c=a.alarms.map(function(a){return a.id});c.forEach(function(a){var c=Math.floor(Math.random()*b.statusList.length);b.update(a,{status:b.status[b.statusList[c]]})})})}function n(a){for(var b=0;a>b;b++){var c={name:"Group "+Math.round(100*Math.random())};e.create(c)}}function o(a){for(var b=0;a>b;b++){var c={name:"Acme, Inc",address:"Master Street",zipcode:"12341234",city:"Dusseldorf",phone:"+3413234234"};d.create(c)}}function p(a,b){for(var c=b.managedObjects,d=c.length,e=0;a>e;e++){var g=c[Math.floor(Math.random()*d)],h={deviceId:g.id,status:f.status[Math.floor(Math.random()*f.length)],description:"Turn off device",c8y_DiscreteStateDevice:{state:"off"}};f.create(h)}}function q(){f.list().success(function(a){a.operations.forEach(function(a){var b={id:a.id},c=["PENDING","SUCCESSFUL","EXECUTING","FAILED"][Math.floor(4*Math.random())];b.status=c,f.update(b)})})}function r(){var a={fragmentType:"c8y_isDevice",pageSize:1e3};c.list(a).success(function(a){a.managedObjects.forEach(function(a){c.update(a.id,g.agentify({com_cumulocity_model_agent:null}))})})}function s(){a.list({pageSize:1e6}).success(function(b){b.managedObjects.forEach(function(b){c.update(b.id,a.createRandomDevice())})})}function t(){c.list({type:"c8y_Firmware",pageSize:1e6}).success(function(a){a.managedObjects.forEach(function(a,b){b>5&&c.remove(a.id)})})}function u(){a.list({pageSize:1e8}).success(function(a){a.managedObjects.forEach(function(a){return a.name.match(/rasp/gi)||23205===parseInt(a.id,10)?!0:(c.remove(a.id),void 0)})})}function v(b){a.list().success(function(a){p(b,a)})}function w(){e.list().success(function(a){a.managedObjects.forEach(function(a){c.remove(a)})})}function x(a){for(var b=0;a>b;b++){var d=Math.floor(2*Math.random()),e={type:"c8y_Firmware",name:["RAM-6xxx / 3.13 4.13","Gateway HG620 Open Source"][d],url:["http://www.sixnet.com/dist/software/btw/3.13_4.13_sn_reflash.zip","http://download-c.huawei.com/tcpsdownload/downLoadCenter?category=&flay=software&downloadID=NDcxNzA="][d]};
c.create(e)}}function y(a){for(var b=200,c=b;c>=0;c--){var d={source:{id:String(a)},time:moment().subtract("hours",c/2).format("YYYY-MM-DDTH:mm:ss"),type:"signalStrength",c8y_SignalStrength:{rssi:{value:50+Math.round(35*Math.random()),unit:"%"}}};i.create(d)}}function z(a){for(var b=200,c=100,d=100,e=b;e>=0;e--){d-=10+Math.round(6*Math.random()),c-=10+Math.round(6*Math.random()),0>c&&(c=100),0>d&&(d=100);var f={source:{id:String(a)},time:moment().subtract("hours",e).format("YYYY-MM-DDTH:mm:ss"),type:"battery",c8y_BatteryStrength:{mainBattery:{value:c,unit:"%"},backupBattery:{value:d,unit:"%"}}};i.create(f)}}function A(a){for(var b=200,c=b;c>=0;c--){var d={source:{id:String(a)},time:moment().subtract("hours",c/2).format("YYYY-MM-DDTH:mm:ss"),type:"temperature",c8y_Temperature:{Sensor1:{value:0+Math.round(35*Math.random()),unit:"celsius"}}};i.create(d)}}return{createDevices:j,cleanDevices:r,createAlarms:k,correctAlarms:m,createDeviceGroups:n,deleteDeviceGroups:w,createCustomers:o,createDeviceControl:v,fixDeviceControl:q,fixDevices:s,createEvents:l,createFirmware:x,createSignalMeasurements:y,createTemperatureMeasurements:A,createBatteryMeasurements:z,cleanFirmware:t,clearDevices:u}}]),angular.module("c8y.core").factory("c8yGeo",["$http",function(a){"use strict";var b="//open.mapquestapi.com/nominatim/v1/search.php?json_callback=JSON_CALLBACK",c=function(c){return a.jsonp(b,{params:{format:"json",q:c}})},d=function(){return this.points=[],this};return d.prototype.add=function(a){this.points.push(a)},d.prototype.reset=function(){this.points.length=0},d.prototype.get=function(){var a={southWest:{},northEast:{}};return this.points.length||(a=null),this.points.forEach(function(b){b.lat<(a.southWest.lat||1/0)&&(a.southWest.lat=b.lat),b.lng<(a.southWest.lng||1/0)&&(a.southWest.lng=b.lng),b.lat>(a.northEast.lat||-1/0)&&(a.northEast.lat=b.lat),b.lng>(a.northEast.lng||-1/0)&&(a.northEast.lng=b.lng)}),a},{geoCode:c,Bounds:d}}]),angular.module("c8y.core").factory("c8yIdentity",["$http",function(a){"use strict";var b={},c="/identity/",d="application/vnd.com.nsn.cumulocity.externalId+json;",e={headers:{"Content-Type":d}};return b.createIdentity=function(b,d){return a.post(c+"globalIds/"+b.id+"/externalIds",d,angular.copy(e))},b.deleteIdentity=function(b){return a["delete"](c+"externalIds/"+b.type+"/"+b.externalId)},b.listExternalIds=function(b){return a.get(c+"globalIds/"+b.id+"/externalIds")},b.getExternalId=function(b){return a.get(c+"externalIds/"+b.type+"/"+b.externalId)},b}]),angular.module("c8y.core").factory("c8yManagedObject",["$http","$q","$rootScope","c8yBase",function(a,b,c,d){"use strict";function e(b,c,e){return angular.isObject(c)&&(c=c.id),e=e||{},a.get(d.url(k+"/"+c+"/"+b),e)}function f(b,c,e){return angular.isObject(c)&&(c=c.id),e={managedObject:e},a.post(d.url(k+"/"+c+"/"+b),e,angular.copy(n))}function g(b,c,e){return angular.isObject(c)&&(c=c.id),angular.isObject(e)&&(e=e.id),a["delete"](d.url(k+"/"+c+"/"+b+"/"+e))}var h={},i="application/vnd.com.nsn.cumulocity.managedObject+json;",j="application/vnd.com.nsn.cumulocity.managedObjectReference+json;",k="inventory/managedObjects",l=d.clean,m={headers:{"Content-Type":i}},n={headers:{"Content-Type":j}};return h.list=function(b){return b=b||{},b.pageSize=b.pageSize||d.PAGESIZE,b.pageSize<1e3&&(b.withTotalPages=!0),a.get(d.url(k),{params:b})},h.new=function(a,e,f){var g={name:a,type:e};f&&angular.extend(g,f),g=l(g);var h=b.defer(),i=h.promise;return h.resolve(g),d.simulate$http(i),c.$apply(),i},h.detail=function(b,c){return angular.isObject(b)&&(b=b.id),a.get(d.url(k+"/"+b),{params:c||{}})},h.remove=function(b){return angular.isObject(b)&&(b=b.id),a["delete"](d.url(k+"/"+b))},h.create=function(b){return b=l(b),a.post(d.url(k),b,angular.copy(m))},h.update=function(b,c){return angular.isObject(b)&&(c=c||b,b=b.id),c=l(c),a.put(d.url(k+"/"+b),c,angular.copy(m))},h.childDevices=function(a,b){return e("childDevices",a,b)},h.childAssets=function(a,b){return e("childAssets",a,b)},h.addChildDevice=function(a,b){return f("childDevices",a,b)},h.addChildAsset=function(a,b){return f("childAssets",a,b)},h.removeChildDevice=function(a,b){return g("childDevices",a,b)},h.removeChildAsset=function(a,b){return g("childAssets",a,b)},h.buildService=function(a){var b=angular.copy(h);return["create","list"].forEach(function(c){var d=b[c];b[c]=function(b){return b=b||{},angular.extend(b,a),d(b)}}),b},h}]),angular.module("c8y.core").factory("c8yMeasurements",["$http","c8yBase",function(a,b){"use strict";var c={},d=b.clean,e="application/vnd.com.nsn.cumulocity.measurement+json;",f="measurement/measurements",g={headers:{"Content-Type":e}};return c.list=function(c){return c=c||{},c.pageSize=c.pageSize||b.PAGESIZE,a.get(b.url(f),{params:c})},c.detail=function(c){return angular.isObject(c)&&(c=c.id),a.get(b.url(f+"/"+c))},c.create=function(c){if(!c.source)throw new Error("c8yMeasurement: source must be defined");return c=d(c),a.post(b.url(f),c,g)},c.update=function(c,e){return angular.isObject(c)&&(c=c.id),e=d(e),a.put(b.url(f+"/"+c),e,g)},c}]),angular.module("c8y.core").factory("c8yModel",["configModel",function(a){"use strict";var b={};return b.frag=function(b){return a.fragments[b]||b},b}]),angular.module("c8y.core").factory("c8yNotifications",["$http","$rootScope","c8yBase",function(a,b,c){"use strict";function d(d){var i={url:c.url(d),logLevel:"info",requestHeaders:a.defaults.headers.common,appendMessageTypeToURL:!1};j.init(i);var m=j.addListener("/meta/connect",function(){g=!0,k.forEach(function(a){f(a.subscription)}),j.removeListener(m),k.length=0});h=j.addListener("/meta/subscribe",function(a){var c=Object.keys(l).filter(function(b){return a.subscription.match(b)});c.length&&(l[c[0]].subscribed=a),b.$broadcast("subscription",a),e()})}function e(){b.$$phase||b.$apply()}function f(a){if(!g)return i.initCep(),k.push({subscription:a}),void 0;if(l[a]&&l[a].subscribed){var c=l[a].subscribed;return b.$broadcast("subscription",c),e(),void 0}var d=j.subscribe(a,function(c){c.id=parseInt(c.id,10),b.$broadcast("notification",a,{subName:a,subObj:d,msg:c,data:c.data}),e()});return l[a]={subName:a,subObj:d},d}var g,h,i={},j=$.cometd,k=[],l={};return j.unregisterTransport("websocket"),i.initCep=function(){d("cep/notifications")},i.registerExtension=function(a,b){j.registerExtension(a,b)},i.unregisterExtension=function(a,b){j.unregisterExtension(a,b)},i.subscribe=function(a){f(a)},i.unsubscribe=function(a){var b=l[a],c=null;if(b)return delete l[a],c=j.unsubscribe(b.subObj),j.isDisconnected()||Object.keys(l).length||(j.removeListener(h),j.disconnect(),g=!1),c},i}]),angular.module("c8y.core").factory("c8ySettings",["$http","c8yBase",function(a,b){"use strict";var c={},d="tenant/options",e="application/vnd.com.nsn.cumulocity.optionCollection+json;",f="application/vnd.com.nsn.cumulocity.option+json;",g=function(a){return{headers:{"Content-Type":a}}};return c.list=function(c){return angular.isObject(c)||(c={}),c.pageSize=1e4,a.get(b.url(d),{params:c},g(e))},c.get=function(c,e){var f=b.url([d,c,e].join("/"));return a.get(f)},c.updateOption=function(c){var e=b.clean(c),h=b.url([d,c.category,c.key].join("/"));return a.put(h,e,g(f))},c.createOption=function(c){var e=b.clean(c),h=b.url(d);return a.post(h,e,g(f))},c.deleteOption=function(c){var e=b.url([d,c.category,c.key].join("/"));return a.delete(e)},c}]),angular.module("c8y.core").factory("c8yStatement",["$http","$q","$timeout","c8yBase",function(a,b,c,d){"use strict";function e(a){return a=angular.copy(a),delete a.id,delete a.module,a}function f(a){return"default"===a.name}function g(a){return angular.isObject(a)?a.id:a}function h(a){return d.url(l+"/"+j.id+"/statements"+(a?"/"+g(a):""))}function i(c){return function(e){var g,h,i=b.defer();return i.promise.then(function(){c(e).success(g).error(h)}),j?i.resolve():a.get(d.url(l)).success(function(b){for(var c in b.modules){var e=b.modules[c];if(f(e))return j=e,i.resolve(),void 0}a.post(d.url(l),{name:"default"},m()).success(function(a){j=a,i.resolve()})}),{then:function(a,b){g=a,h=b},success:function(a){return g=a,this},error:function(a){return h=a,this}}}}var j,k={},l="cep/modules",m=function(){return d.requestConfig("cepModule","cepModule")},n=function(){return d.requestConfig("cepStatement","cepStatement")},o=[{name:"select temperate readings over 100 degree",value:'select * from MeasurementCreated e\nwhere getNumber(e, "c8y_TemperatureMeasurement.T.value") > 100'},{name:"create alarm when temperature over 100 degree",value:'insert into CreateAlarm \n  select\n    e.measurement.time as time,\n    e.measurement.source.value as source,\n    "com_cumulocity_TemperatureAlert" as type,\n    "Temperature too high" as text,\n    "ACTIVE" as status,\n    "CRITICAL" as severity\n  from MeasurementCreated e\n  where getNumber(e, "c8y_TemperatureMeasurement.T.value") > 100'},{name:"create alarm when temperature below 0 degree",value:'insert into CreateAlarm \n  select\n    e.measurement.time as time,\n    e.measurement.source.value as source,\n    "com_cumulocity_TemperatureAlert" as type,\n    "Temperature too low" as text,\n    "ACTIVE" as status,\n    "CRITICAL" as severity\n  from MeasurementCreated e\n  where getNumber(e, "c8y_TemperatureMeasurement.T.value") > 100'},{name:"create close replay operation when temperature readings over 100 degree",value:'insert into CreateOperation\n  select\n    "PENDING" as status,\n    «heating ID» as deviceId\n    {\n      "c8y_Relay.relayState", "CLOSED"\n    } as fragments\n  from MeasurementCreated e\n  where getNumber(e, "c8y_TemperatureMeasurement.T.value") > 100'},{name:"select location change event once for 60 seconds",value:'select * from EventCreated e\nwhere getObject(e, "c8y_LocationMeasurement") is not null\noutput first every 60 seconds'},{name:"send email notification with current temperature",value:'expression string js:prepareEmailText(temp, state) [\n    function format(text, params){\n            for(param in params) {\n                text = text.replace("{" + param + "}", params[param])\n            }\n        return text\n    }\n    format("Hello,\\n current temperature is {0} (state = {1}). Regards.", [temp, state])\n]\ninsert into SendEmail\nselect\n  "sender@sender" as sender,\n  "receiver@receiver" as receiver,\n  "Temperature critical!" as subject,\n  prepareEmailText(\n    getNumber(e, "c8y_TemperatureMeasurement.T.value"),\n    getString(e, "c8y_TemperatureMeasurement.T.state")\n   ) as text\nfrom MeasurementCreated e'},{name:"change the severities of alarms based on activity time",value:'/* Create "context" - definition of a group of events to be processed separately.\n * Context "Alarms" consists of AlarmCreated and AlarmUpdated: \n * with the same source and type = "power off". */\ncreate context Alarms partition by \nalarm.source from AlarmCreated(alarm.type = "power off"),\nalarm.source from AlarmUpdated(alarm.type = "power off");\n\n/* Update severity for all active AlarmCreated \n * after which there is no change to other status in 15 minutes. */\ncontext Alarms \ninsert into UpdateAlarm \nselect \n   a.alarm.id as id,\n   "MAJOR" as severity\nfrom pattern [\n   every a = AlarmCreated(alarm.status = CumulocityAlarmStatuses.ACTIVE) \n   -> (timer:interval(15 minutes) \n      and not AlarmUpdated(alarm.status != CumulocityAlarmStatuses.ACTIVE))\n];'}];return k.list=i(function(b){return a.get(d.url(l+"/"+j.id+"/statements"),b)}),k.detail=i(function(b){return a.get(h(b))}),k.remove=i(function(b){return a["delete"](h(b.id))}),k.save=i(function(b){var c,d=b.id;return c=d?a.put(h(d),e(b),n()):a.post(h(),e(b),n())}),k.examples=function(){return{success:function(a){c(function(){a(o)})}}},k}]),angular.module("c8y.core").factory("c8yStatistics",["$rootScope","$http","$q","c8yBase",function(a,b,c,d){"use strict";var e={},f="tenant/tenants/"+d.user().tenant+"/statistics/summary";return e.getSummary=function(){return b.get(d.url(f))},e}]),angular.module("c8y.core").factory("c8yUser",["$http","$timeout","c8yBase","c8yAuth",function(a,b,c,d){"use strict";function e(a){return{headers:{"Content-Type":a,Accept:a}}}function f(a,b){return a.replace(/{tenant}/g,b)}function g(a){return a=angular.copy(a),a.id&&delete a.userName,delete a.id,a}function h(a){return i()+"/"+a}function i(){return f(c.url(j),c.user().tenant)}var j="user/{tenant}/users",k="application/vnd.com.nsn.cumulocity.user+json;",l="application/vnd.com.nsn.cumulocity.userCollection+json;",m={};return m.list=function(b){var d={pageSize:c.PAGESIZE};return angular.isObject(b)&&(d=angular.extend(d,b)),a.get(i(),{params:d},e(l))},m.detail=function(b){return a.get(h(b.id),{},e(k))},m.remove=function(b){return a["delete"](h(b.id))},m.save=function(b){var f,j=b.id;return j?(f=a.put(h(j),g(b),e(k)),b.password&&j===c.user().username&&f.success(function(){d.updatePassword(b.password)})):f=a.post(i(),g(b),e(k)),f},m}]),angular.module("c8y.core").factory("c8yUserGroup",["$http","c8yBase",function(a,b){"use strict";function c(a){return{headers:{"Content-Type":a,Accept:a}}}function d(a,b){return a.replace(/{tenant}/g,b)}function e(a,b){return a.replace(/{group_id}/g,b)}function f(){return d(b.url(o),b.user().tenant)}function g(a){var c=b.url(q);return c=d(c,b.user().tenant),e(c,a)}function h(a){var c=b.url(s);return c=d(c,b.user().tenant),e(c,a)}function i(a,b){return h(a)+"/"+b}function j(a){var c=b.url(u);return c=d(c,b.user().tenant),e(c,a)}function k(a,b){return j(a)+"/"+b}function l(a){return delete a.id,a}function m(a){return a=angular.copy(a),delete a.selected,delete a.highLight,a}var n={},o="user/{tenant}/groups",p="application/vnd.com.nsn.cumulocity.groupCollection+json;",q="user/{tenant}/groups/{group_id}",r="application/vnd.com.nsn.cumulocity.group+json;",s="user/{tenant}/groups/{group_id}/users",t="application/vnd.com.nsn.cumulocity.userReference+json;",u="user/{tenant}/groups/{group_id}/roles",v="user/roles?pageSize=1000",w="application/vnd.com.nsn.cumulocity.roleCollection+json",x="application/vnd.com.nsn.cumulocity.roleReference+json";return n.list=function(d){var e={pageSize:b.PAGESIZE};return angular.isObject(d)&&(e=angular.extend(e,d)),a.get(f(),{params:e},c(p))},n.detail=function(b){return a.get(g(b.id),{},c(r))},n.addUserToGroup=function(b,d){return a.post(h(d),{user:b},c(t))},n.removeUserFromGroup=function(b,d){return a["delete"](i(d,b.userName),{},c(t))},n.saveUserGroup=function(b){var d,e=b.id;return d=e?a.put(g(e),l(b),c(r)):a.post(f(),l(b),c(r))},n.removeUserGroup=function(b){return a["delete"](g(b.id),l(b),c(r))},n.getAllRoles=function(){return a.get(b.url(v),{},c(w))},n.addRoleToGroup=function(b,d){var e=j(d);return a.post(e,{role:m(b)},c(x))},n.removeRoleFromGroup=function(b,d){return a["delete"](k(d,b.id),{},c(x))},n}]),angular.module("c8y.parts.tpls",["modules/smartui/views/login.html","modules/smartui/views/messages.html"]),angular.module("modules/smartui/views/login.html",[]).run(["$templateCache",function(a){a.put("modules/smartui/views/login.html",'<div class="title">\n\n</div>\n<form class="" data-ng-controller="LoginCtrl" data-ng-submit="login(tenant, username, password, remember)">\n  <div class="control-group" data-ng-show="showTenant">\n    <label class="control-label" for="inputTenant">Tenant</label>\n    <div class="controls">\n      <input type="text" id="inputTenant" placeholder="Tenant" data-ng-model="tenant" autocorrect="off" autocapitalize="off">\n    </div>\n  </div>\n  <div class="control-group">\n    <label class="control-label" for="inputUser">User</label>\n    <div class="controls">\n      <input type="text" id="inputUser" placeholder="Username" data-ng-model="username" autocorrect="off" autocapitalize="off">\n    </div>\n  </div>\n  <div class="control-group">\n    <label class="control-label" for="inputPassword">Password</label>\n    <div class="controls">\n      <input type="password" id="inputPassword" placeholder="Password" data-ng-model="password">\n    </div>\n  </div>\n  <div class="control-group">\n    <div class="controls">\n      <label class="checkbox">\n        <input type="checkbox" data-ng-model="remember"> Remember me\n      </label>\n      <button type="submit" class="btn btn-block btn-large">Sign in <i class="{{iconStatus()}}"></i></button>\n    </div>\n  </div>\n</form>\n')}]),angular.module("modules/smartui/views/messages.html",[]).run(["$templateCache",function(a){a.put("modules/smartui/views/messages.html",'<div class="alert main loading" data-ng-show="ajaxCount">\n  <i class="icon-spinner icon-spin" style="margin-right:10px;"> </i> Contacting server...\n</div>\n\n<div class="alert main"\n  data-ng-class="{\'alert-error\':(message.type==\'error\'),\'alert-success\': (message.type==\'success\'), \'persist\': message.persist}"\n  data-ng-repeat="message in messages"\n  data-ng-click="closeMessage(message)">\n  <button type="button" class="close" data-ng-show="message.persist" data-ng-click="closeMessage(message, 1)" style="margin-top:-3px;margin-right:5px;">&times;</button>\n  <span ng-bind-html-unsafe="message.text" class="message">\n  </span>\n\n</div>\n')}]),angular.module("c8y.smartui",["c8y.core","c8y.config"]).config(["$httpProvider",function(a){"use strict";function b(){return b.val||(c=angular.element(document.body).injector(),b.val=c.get("$rootScope"),b.val.ajaxCount=0),b.val}var c;a.defaults.headers.common={},a.defaults.transformRequest.push(function(a){return b().ajaxCount++,a}),a.defaults.transformResponse.push(function(a){return b().ajaxCount--,a}),a.responseInterceptors.push(["$q",function(a){return function(c){return c.then(null,function(c){var d=c.data.message;return d||(d=angular.isObject(c.data)?angular.toJson(c.data):c.data),d||(d="HTTP "+c.status),b().$broadcast("message",{type:"error",text:d,persist:d.length>20}),a.reject(d)})}}])}]),angular.module("c8y.smartui").controller("LoginCtrl",["$scope","$location","c8yAuth",function(a,b,c){"use strict";function d(){f="idle",a.password=null}function e(){f="idle"}var f="idle";a.showTenant=c.useTenant(),a.login=function(a,b,g,h){f="trying",c.login(a,b,g,h).success(d).error(e)},a.iconStatus=function(){return"idle"===f?"icon-signin":"icon-spinner icon-spin"}}]),angular.module("c8y.smartui").controller("MessagesCtrl",["$scope","$rootScope","$timeout",function(a,b,c){"use strict";var d=b.messages=[];b.$on("message",function(b,e){var f={success:2e3,error:6e3};"error"!==e.type||e.text||(e.text="Unknown error"),d.push(e),d.length>3&&d.shift(),f[e.type]&&!e.persist&&c(function(){a.closeMessage(e)},f[e.type])}),a.closeMessage=function(a,b){if(!a.persist||b){var c=d.indexOf(a);d.splice(c,1)}}}]);